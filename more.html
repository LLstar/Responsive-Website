<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
    <title>更多</title>
    <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/more.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="lib/html5shiv/html5shiv.min.js"></script>
      <script src="lib/respond/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <!-- 顶部菜单 start-->
    <div id="top">
        <div class="topBar visible-md visible-lg">
            <div class="container">
                <div class="row">
                    <div class=" col-md-3 text-center t-position">
                        <i class="glyphicon glyphicon-map-marker"></i>
                        <a href="" id="positionText">北京</a>
                        <ul id="position">
                        </ul>
                    </div>
                    <div class="col-md-2 text-center">
                        <a href="login.html"><i class="glyphicon glyphicon-user"></i>登录</a>&nbsp;
                        <a href="register.html">免费注册</a>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="">我的订单</a>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="index.html">我的趣购</a>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="">趣购会员</a>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="">企业采购</a>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="">客户服务</a>
                    </div>
                    <div class="col-md-1 text-center" id="navBar">
                        <a href="">网站导航<i class="glyphicon glyphicon-menu-down"></i>
                        </a>
                        <ul class="nav-bar">
                            <li class="nav-item">特色主题
                                <div>
                                    <small>趣购金融</small><small>趣购会员</small>
                                    <br>
                                    <small>优惠券</small><small>陪伴计划</small>
                                    <br>
                                    <small>买什么</small><small>趣购秒杀</small>
                                    <br>
                                    <small>全球购</small><small>0元测评</small>
                                    <br>
                                </div>
                            </li>
                            <li class="nav-item">行业频道
                                <div>
                                    <small>家用电器</small><small>手机数码</small>
                                    <br>
                                    <small>精选家居</small><small>服装鞋包</small>
                                    <br>
                                    <small>美妆个护</small><small>食品生鲜</small>
                                    <br>
                                    <small>礼品鲜花</small><small>汽车用品</small>
                                    <br>
                                </div>
                            </li>
                            <li class="nav-item">生活服务
                                <div>
                                    <small>趣购金融</small><small>优惠券</small>
                                    <br>
                                    <small>话费</small><small>加油卡</small>
                                    <br>
                                    <small>火车票</small><small>旅游出行</small>
                                    <br>
                                    <small>电影票</small><small>酒店住宿</small>
                                    <br>
                                </div>
                            </li>
                            <li class="nav-item">更多精选
                                <div>
                                    <small>合作招商</small><small>服装市场</small>
                                    <br>
                                    <small>企业采购</small><small>游戏社区</small>
                                    <br>
                                    <small>智能家居</small><small>知识产权</small>
                                    <br>
                                    <small>乡村招募</small><small>校园加盟</small>
                                    <br>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-1 text-center">
                        <a href="" class="mobile-link">手机趣购<i class="glyphicon glyphicon-phone"></i>
                            <img src="images/01.png" alt="扫一扫">
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 顶部导航面板 start-->
        <nav class="navbar navbar-inverse visible-sm visible-xs">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#"><i class="glyphicon glyphicon-map-marker"></i>北京 <span class="sr-only">(current)</span></a></li>
                        <li><a href="#">我的趣购</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">个人中心<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="login.html">你好,请登录</a>
                                    <a href="">免费注册</a>
                                </li>
                                <li><a href="">我的订单</a></li>
                                <li><a href="index.html">我的趣购</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="">趣购会员</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="">企业采购</a></li>
                                <li><a href="">客户服务</a></li>
                                <li><a href="">网站导航</a></li>
                            </ul>
                        </li>
                    </ul>
                    <form class="navbar-form navbar-left">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-danger"><i class="glyphicon glyphicon-search"></i></button>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">购物车</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- 顶部导航菜单 end-->
    </div>
    <!-- 顶部菜单 end-->
    <!-- 导航条 start-->
    <div id="header">
        <div id="h-top" style="margin-top: 25px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-offset-3 col-lg-6 col-md-6 visible-lg visible-md text-center">
                        <!-- 搜索框 start-->
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="华为">
                            <span class="input-group-btn">
                                    <button class="btn btn-danger" type="button"><i class="glyphicon glyphicon-search"></i></button>
                                </span>
                        </div>
                        <!-- 搜索框 end-->
                        <!-- 热门词汇 start -->
                        <div class="hotwords">
                            <ul>
                                <li><a href="">鞋包有礼</a></li>
                                <li><a href="">毛呢大衣</a></li>
                                <li><a href="">约会圣诞</a></li>
                                <li><a href="">特卖街</a></li>
                                <li><a href="">口腔护理</a></li>
                                <li><a href="">进口面膜</a></li>
                                <li class="hidden-md"><a href="">洗护大牌</a></li>
                                <li class="hidden-md"><a href="">欧莱雅</a></li>
                            </ul>
                        </div>
                        <!-- 热门词汇 end -->
                    </div>
                    <!-- 购物车 start -->
                    <div class=" text-center visible-md visible-lg" id="cart">
                        <a href="cart.html">
                            <button class="btn btn-danger" type="button">
                                <i class="glyphicon glyphicon-shopping-cart"></i> 我的购物车
                                <span class="badge" style="position: static;">4</span>
                            </button>
                        </a>
                    </div>
                    <!-- 购物车 end -->
                </div>
            </div>
        </div>
    </div>
    <!-- 导航条 end-->
    <!-- 更多商品 start-->
    <ul class="waterfall_ul">
        <!-- <li class="col-md-3 col-lg-3 col-sm-4 col-xs-6 li_w">
            <div class="img-w">
                <img src="images/more-1.jpg">
            </div>
            <div class="intro-w">
                <p class="content">vivo Y85 全面屏 美颜拍照手机 4GB+64GB 香槟金 移动联通电信4G手机 双卡双待</p>
                <strong class="price">¥48.00</strong>
            </div>
        </li> -->
    </ul>
    <!-- 更多商品 end-->
    <!-- 合作伙伴 start-->
    <div id="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="footer-title text-center">
                    <a href="">关于我们 |</a>
                    <a href="">&nbsp;联系我们 |</a>
                    <a href="">&nbsp;合作伙伴</a>
                </div>
                <div class="footer-content text-center">
                    <span>计算机与信息工程学院</span>
                    <span>计算机科学与技术2班</span>
                    <span>马璐璐</span>
                </div>
            </div>
        </div>
    </div>
    <!-- 合作伙伴 end-->
</body>

</html>
<script type="text/javascript" src="lib/jquery/jquery.js"></script>
<script type="text/javascript" src="lib/bootstrap/js/bootstrap.js"></script>
<script>
var oUl = document.querySelector('.waterfall_ul');
var scrollH = document.documentElement.scrollHeight || document.body.scrollHeight;
var windowHeight = document.documentElement.clientHeight || document.body.clientHeight;

// console.log(scrollH, windowHeight)
ajaxPost($)

function createLi(data) {
    for (var i = 0; i < data.data.length; i++) {
        // if(windowHeight>=scrollH){
        var li = document.createElement("li");
        var str = '';
        li.className = 'col-md-3 col-lg-3 col-sm-4 col-xs-6 li_w';

        str += '<div class="img-w">';
        str += '<img src=' + data.data[i].img + '>';
        str += '</div>';
        str += '<div class="intro-w">';
        str += '<p class="content">';
        str += data.data[i].p;
        str += '</p>';
        str += '<strong class="price">';
        str += data.data[i].price;
        str += '</strong>';
        str += '</div>';
        // console.log(i)
        li.innerHTML = str;
        oUl.appendChild(li);
        // }
    }


}

window.onscroll = function() {
    var scrollH = oUl.offsetHeight;
    // console.log(scrollH);
    // 文档高度
    var bodyHeight = document.documentElement.offsetHeight;
    // 视口高度
    var windowHeight = document.documentElement.clientHeight;
    // 滚动条的高度
    var scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;
    var scrollH = document.documentElement.scrollHeight || document.body.scrollHeight;
    // console.log(scrollH)
    // console.log(windowHeight)
    // console.log(scrollHeight)
    if (scrollHeight + windowHeight >= scrollH) {
        ajaxPost($);
        // console.log(111)
    }

}

function getMin(arr) {
    var m = 0;
    for (var i = 0; i < arr.length; i++) {
        m = Math.min(arr[m], arr[i]) == arr[m] ? m : i;
    }
    return m;
}

// ajax
function ajaxPost($) {
    $.ajax({
            url: './json/data.json',
            type: 'get',
            dataType: 'json',
        })
        .done(function(data) {
            console.log((data))
            createLi(data);
        })
        .fail(function(err) {
            console.log(err);
        })
        .always(function() {
            console.log("complete");
        });
}

//省份定位
var data = [
    "北京", "天津", "上海", "重庆", "河北", "山西", "辽宁", "吉林", "黑龙江", "江苏", "浙江", "安徽", "福建", "江西", "山东", "河南", "湖北", "湖南", "广东", "海南", "四川", "贵州", "云南", "陕西", "甘肃", "青海", "内蒙古", "广西", "西藏", "宁夏", "新疆", "香港", "澳门", "台湾"
]

var ul = document.getElementById('position');
var text1 = document.getElementById('positionText');
var div = document.querySelector('.t-position');

//动态的添加li标签，并把数组中的内容添加到li标签中
var list = "";
for (var i = 0; i < data.length; i++) {
    list += "<li class='item'>" + data[i] + "</li>";
}
ul.innerHTML = list;

ul.children[0].className = "item selected";

// console.log(ul.innerHTML);

var lis = ul.children;

// console.log(lis);

for (var j = 0; j < lis.length; j++) {
    //先清除需要的类名
    lis[j].index = j;
    lis[j].onmouseover = function() {
        this.style.cursor = "pointer";

    }
    lis[j].onclick = function() {
        for (var i = 0; i < lis.length; i++) {
            lis[i].className = "item";

        }
        this.className = "item selected";
        text1.innerHTML = this.innerHTML;

    }
}

div.onmouseover = function() {
    ul.style.display = "block";
}

div.onmouseout = function() {
    ul.style.display = "none";
}

// 网站导航
var nav = document.getElementById('navBar');
var uL = document.querySelector('.nav-bar');

nav.onmouseover = function() {
    uL.style.display = "block";
}

nav.onmouseout = function() {
    uL.style.display = "none";
}
</script>